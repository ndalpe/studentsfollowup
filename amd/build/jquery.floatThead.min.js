define(["jquery"],function(a){"use strict";function b(a,b){if(8==k){var c=p.width(),d=i.debounce(function(){var a=p.width();c!=a&&(c=a,b())},1);p.on(a,d)}else p.on(a,i.debounce(b,1))}function c(b){var c=b[0],d=c.parentElement;do{var e=window.getComputedStyle(d).getPropertyValue("overflow");if("visible"!=e)break}while(d=d.parentElement);return a(d==document.body?[]:d)}function d(a){window&&window.console&&window.console.error&&window.console.error("jQuery.floatThead: "+a)}function e(a){var b=a.getBoundingClientRect();return b.width||b.right-b.left}function f(){var a=document.createElement("scrolltester");a.style.cssText="width:100px;height:100px;overflow:scroll!important;position:absolute;top:-9999px;display:block",document.body.appendChild(a);var b=a.offsetWidth-a.clientWidth;return document.body.removeChild(a),b}function g(a){if(a.dataTableSettings)for(var b=0;b<a.dataTableSettings.length;b++){var c=a.dataTableSettings[b].nTable;if(a[0]==c)return!0}return!1}function h(a,b,c){var d=c?"outerWidth":"width";if(n&&a.css("max-width")){var e=0;c&&(e+=parseInt(a.css("borderLeft"),10),e+=parseInt(a.css("borderRight"),10));for(var f=0;f<b.length;f++)e+=b.get(f).offsetWidth;return e}return a[d]()}a.floatThead=a.floatThead||{},a.floatThead.defaults={headerCellSelector:"tr:visible:first>*:visible",zIndex:1001,position:"auto",top:0,bottom:0,scrollContainer:function(b){return a([])},responsiveContainer:function(b){return a([])},getSizingRow:function(a,b,c){return a.find("tbody tr:visible:first>*:visible")},floatTableClass:"floatThead-table",floatWrapperClass:"floatThead-wrapper",floatContainerClass:"floatThead-container",copyTableClass:!0,autoReflow:!1,debug:!1,support:{bootstrap:!0,datatables:!0,jqueryUI:!0,perfectScrollbar:!0}};var i=window._||function(){var b={},c=Object.prototype.hasOwnProperty,d=["Arguments","Function","String","Number","Date","RegExp"];b.has=function(a,b){return c.call(a,b)},b.keys=Object.keys||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[];for(var d in a)b.has(a,d)&&c.push(d);return c};var e=0;return b.uniqueId=function(a){var b=++e+"";return a?a+b:b},a.each(d,function(){var a=this;b["is"+a]=function(b){return Object.prototype.toString.call(b)=="[object "+a+"]"}}),b.debounce=function(a,b,c){var d,e,f,g,h;return function(){f=this,e=arguments,g=new Date;var i=function(){var j=new Date-g;j<b?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e)))},j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e)),h}},b}(),j="undefined"!=typeof MutationObserver,k=function(){for(var a=3,b=document.createElement("b"),c=b.all||[];a=1+a,b.innerHTML="<!--[if gt IE "+a+"]><i><![endif]-->",c[0];);return 4<a?a:document.documentMode}(),l=/Gecko\//.test(navigator.userAgent),m=/WebKit\//.test(navigator.userAgent);k||l||m||(k=11);var n=function(){if(m){var b=a("<div>").css("width",0).append(a("<table>").css("max-width","100%").append(a("<tr>").append(a("<th>").append(a("<div>").css("min-width",100).text("X")))));a("body").append(b);var c=0==b.find("table").width();return b.remove(),c}return!1},o=!l&&!k,p=a(window);if(!window.matchMedia){var q=window.onbeforeprint,r=window.onafterprint;window.onbeforeprint=function(){q&&q(),p.triggerHandler("beforeprint")},window.onafterprint=function(){r&&r(),p.triggerHandler("afterprint")}}a.fn.floatThead=function(l){if(l=l||{},k<8)return this;var q=null;if(i.isFunction(n)&&(n=n()),i.isString(l)){var r=l,s=Array.prototype.slice.call(arguments,1),t=this;return this.filter("table").each(function(){var b=a(this),c=b.data("floatThead-lazy");c&&b.floatThead(c);var d=b.data("floatThead-attached");if(d&&i.isFunction(d[r])){var e=d[r].apply(this,s);void 0!==e&&(t=e)}}),t}var u=a.extend({},a.floatThead.defaults||{},l);if(a.each(l,function(b,c){b in a.floatThead.defaults||!u.debug||d("Used ["+b+"] key to init plugin, but that param is not an option for the plugin. Valid options are: "+i.keys(a.floatThead.defaults).join(", "))}),u.debug){var v=a.fn.jquery.split(".");1==parseInt(v[0],10)&&parseInt(v[1],10)<=7&&d("jQuery version "+a.fn.jquery+" detected! This plugin supports 1.8 or better, or 1.7.x with jQuery UI 1.8.24 -> http://jqueryui.com/resources/download/jquery-ui-1.8.24.zip")}return this.filter(":not(."+u.floatTableClass+")").each(function(){function l(a){return a+".fth-"+G+".floatTHead"}function n(){var b=0;if(I.children("tr:visible").each(function(){b+=a(this).outerHeight(!0)}),"collapse"==H.css("border-collapse")){var c=parseInt(H.css("border-top-width"),10),d=parseInt(H.find("thead tr:first").find(">*:first").css("border-top-width"),10);c>d&&(b-=c/2)}ia.outerHeight(b),ja.outerHeight(b)}function r(){var a=h(H,ma,!0),b=T?S:Q,c=b.width()||a,d="hidden"!=b.css("overflow-y")?c-N.vertical:c;if(fa.width(d),R){var e=100*a/d;aa.css("width",e+"%")}else aa.outerWidth(a)}function s(){K=(i.isFunction(u.top)?u.top(H):u.top)||0,L=(i.isFunction(u.bottom)?u.bottom(H):u.bottom)||0}function t(){var b,c=I.find(u.headerCellSelector);if(da?b=ca.find("col").length:(b=0,c.each(function(){b+=parseInt(a(this).attr("colspan")||1,10)})),b!=P){P=b;for(var d,e=[],f=[],g=[],h=0;h<b;h++)d=c.eq(h).text(),e.push('<th class="floatThead-col" aria-label="'+d+'"/>'),f.push("<col/>"),g.push(a("<fthtd>").css({display:"table-cell",height:0,width:"auto"}));f=f.join(""),e=e.join(""),o&&(ea.empty(),ea.append(g),ma=ea.find("fthtd")),ia.html(e),ja=ia.find("th"),da||ca.html(f),ka=ca.find("col"),ba.html(f),la=ba.find("col")}return b}function v(){if(!M){if(M=!0,U){var a=h(H,ma,!0),b=$.width();a>b&&H.css("minWidth",a)}H.css(pa),aa.css(pa),aa.append(I),J.before(ha),n()}}function w(){M&&(M=!1,U&&H.width(ra),ha.detach(),H.prepend(I),H.css(qa),aa.css(qa),H.css("minWidth",sa),H.css("minWidth",h(H,ma)))}function x(a){ta!=a&&(ta=a,H.triggerHandler("floatThead",[a,fa]))}function y(a){U!=a&&(U=a,fa.css({position:U?"absolute":"fixed"}))}function z(a,b,c,d){return o?c:d?u.getSizingRow(a,b,c):b}function A(){var a,b=t();return function(){var c=fa.scrollLeft();ka=ca.find("col");var d=z(H,ka,ma,k);if(d.length==b&&b>0){if(!da)for(a=0;a<b;a++)ka.eq(a).css("width","");w();var f=[];for(a=0;a<b;a++)f[a]=e(d.get(a));for(a=0;a<b;a++)la.eq(a).width(f[a]),ka.eq(a).width(f[a]);v()}else aa.append(I),H.css(qa),aa.css(qa),n();fa.scrollLeft(c),H.triggerHandler("reflowed",[fa])}}function B(a){var b=Q.css("border-"+a+"-width"),c=0;return b&&~b.indexOf("px")&&(c=parseInt(b,10)),c}function C(){return"auto"==S.css("overflow-x")}function D(){var a,b=Q.scrollTop(),c=0,d=W?V.outerHeight(!0):0,e=X?d:-d,f=fa.height(),g=H.offset(),h=0,i=0;if(R){var j=Q.offset();c=g.top-j.top+b,W&&X&&(c+=d),h=B("left"),i=B("top"),c-=i}else a=g.top-K-f+L+N.horizontal;var k=p.scrollTop(),l=p.scrollLeft(),n=function(){return(C()?S:Q).scrollLeft()||0},o=n();return function(j){T=C();var q=H[0].offsetWidth<=0&&H[0].offsetHeight<=0;if(!q&&ga)return ga=!1,setTimeout(function(){H.triggerHandler("reflow")},1),null;if(q&&(ga=!0,!U))return null;if("windowScroll"==j)k=p.scrollTop(),l=p.scrollLeft();else if("containerScroll"==j)if(S.length){if(!T)return;o=S.scrollLeft()}else b=Q.scrollTop(),o=Q.scrollLeft();else"init"!=j&&(k=p.scrollTop(),l=p.scrollLeft(),b=Q.scrollTop(),o=n());if(!m||!(k<0||l<0)){if(_)y("windowScrollDone"==j?!0:!1);else if("windowScrollDone"==j)return null;g=H.offset(),W&&X&&(g.top+=d);var r,s,t=H.outerHeight();if(R&&U){if(c>=b){var u=c-b+i;r=u>0?u:0,x(!1)}else r=Z?i:b,x(!0);s=h}else!R&&U?(k>a+t+e?r=t-f+e:g.top>=k+K?(r=0,w(),x(!1)):(r=K+k-g.top+c+(X?d:0),v(),x(!0)),s=o):R&&!U?(c>b||b-c>t?(r=g.top-k,w(),x(!1)):(r=g.top+b-k-c,v(),x(!0)),s=g.left+o-l):R||U||(k>a+t+e?r=t+K-k+a+e:g.top>k+K?(r=g.top-k,v(),x(!1)):(r=K,x(!0)),s=g.left+o-l);return{top:Math.round(r),left:Math.round(s)}}}}function E(){var a=null,b=null,c=null;return function(d,e,f){if(null!=d&&(a!=d.top||b!=d.left)){if(8===k)fa.css({top:d.top,left:d.left});else{var g="translateX("+d.left+"px) translateY("+d.top+"px)";fa.css({"-webkit-transform":g,"-moz-transform":g,"-ms-transform":g,"-o-transform":g,transform:g,top:0,left:0})}a=d.top,b=d.left}e&&r(),f&&n();var h=(T?S:Q).scrollLeft();U&&c==h||(fa.scrollLeft(h),c=h)}}function F(){if(Q.length)if(u.support&&u.support.perfectScrollbar&&Q.data().perfectScrollbar)N={horizontal:0,vertical:0};else{if("scroll"==Q.css("overflow-x"))N.horizontal=O;else{var a=Q.width(),b=h(H,ma),c=d<e?O:0;N.horizontal=a-c<b?O:0}if("scroll"==Q.css("overflow-y"))N.vertical=O;else{var d=Q.height(),e=H.height(),f=a<b?O:0;N.vertical=d-f<e?O:0}}}var G=i.uniqueId(),H=a(this);if(H.data("floatThead-attached"))return!0;if(!H.is("table"))throw new Error('jQuery.floatThead must be run on a table element. ex: $("table").floatThead();');j=u.autoReflow&&j;var I=H.children("thead:first"),J=H.children("tbody:first");if(0==I.length||0==J.length)return u.debug&&d(0==I.length?"The thead element is missing.":"The tbody element is missing."),H.data("floatThead-lazy",u),void H.unbind("reflow").one("reflow",function(){H.floatThead(u)});H.data("floatThead-lazy")&&H.unbind("reflow"),H.data("floatThead-lazy",!1);var K,L,M=!0,N={vertical:0,horizontal:0},O=f(),P=0;u.scrollContainer===!0&&(u.scrollContainer=c);var Q=u.scrollContainer(H)||a([]),R=Q.length>0,S=R?a([]):u.responsiveContainer(H)||a([]),T=C(),U=null;"auto"==u.position?U=null:"fixed"==u.position?U=!1:"absolute"==u.position?U=!0:u.debug&&d('Invalid value given to "position" option, valid is "fixed", "absolute" and "auto". You passed: ',u.position),null==U&&(U=R);var V=H.find("caption"),W=1==V.length;if(W)var X="top"===(V.css("caption-side")||V.attr("align")||"top");var Y=a("<fthfoot>").css({display:"table-footer-group","border-spacing":0,height:0,"border-collapse":"collapse",visibility:"hidden"}),Z=!1,$=a([]),_=k<=9&&!R&&U,aa=a("<table/>"),ba=a("<colgroup/>"),ca=H.children("colgroup:first"),da=!0;0==ca.length&&(ca=a("<colgroup/>"),da=!1);var ea=a("<fthtr>").css({display:"table-row","border-spacing":0,height:0,"border-collapse":"collapse"}),fa=a("<div>").css("overflow","hidden").attr("aria-hidden","true"),ga=!1,ha=a("<thead/>"),ia=a('<tr class="size-row" aria-hidden="true"/>'),ja=a([]),ka=a([]),la=a([]),ma=a([]);ha.append(ia),H.prepend(ca),o&&(Y.append(ea),H.append(Y)),aa.append(ba),fa.append(aa),u.copyTableClass&&aa.attr("class",H.attr("class")),aa.attr({cellpadding:H.attr("cellpadding"),cellspacing:H.attr("cellspacing"),border:H.attr("border")});var na=H.css("display");if(aa.css({borderCollapse:H.css("borderCollapse"),border:H.css("border"),display:na}),R||aa.css("width","auto"),"none"==na&&(ga=!0),aa.addClass(u.floatTableClass).css({margin:0,"border-bottom-width":0}),U){var oa=function(b,c){var d=b.css("position"),e="relative"==d||"absolute"==d,f=b;if(!e||c){var g={paddingLeft:b.css("paddingLeft"),paddingRight:b.css("paddingRight")};fa.css(g),f=b.data("floatThead-containerWrap")||b.wrap(a("<div>").addClass(u.floatWrapperClass).css({position:"relative",clear:"both"})).parent(),b.data("floatThead-containerWrap",f),Z=!0}return f};R?($=oa(Q,!0),$.prepend(fa)):($=oa(H),H.before(fa))}else H.before(fa);fa.css({position:U?"absolute":"fixed",marginTop:0,top:U?0:"auto",zIndex:u.zIndex,willChange:"transform"}),fa.addClass(u.floatContainerClass),s();var pa={"table-layout":"fixed"},qa={"table-layout":H.css("tableLayout")||"auto"},ra=H[0].style.width||"",sa=H.css("minWidth")||"",ta=!1;F();var ua,va=function(){(ua=A())()};va();var wa=D(),xa=E();xa(wa("init"),!0);var ya,za=i.debounce(function(){xa(wa("windowScrollDone"),!1)},1),Aa=function(){xa(wa("windowScroll"),!1),_&&za()},Ba=function(){xa(wa("containerScroll"),!1)},Ca=function(){H.is(":hidden")||(s(),F(),va(),wa=D(),(xa=E())(wa("resize"),!0,!0))},Da=i.debounce(function(){H.is(":hidden")||(F(),s(),va(),wa=D(),xa(wa("reflow"),!0))},1),Ea=function(){w()},Fa=function(){v()},Ga=function(a){a.matches?Ea():Fa()};if(window.matchMedia&&window.matchMedia("print").addListener?(ya=window.matchMedia("print"),ya.addListener(Ga)):(p.on("beforeprint",Ea),p.on("afterprint",Fa)),R?U?Q.on(l("scroll"),Ba):(Q.on(l("scroll"),Ba),p.on(l("scroll"),Aa)):(S.on(l("scroll"),Ba),p.on(l("scroll"),Aa)),p.on(l("load"),Da),b(l("resize"),Ca),H.on("reflow",Da),u.support&&u.support.datatables&&g(H)&&H.on("filter",Da).on("sort",Da).on("page",Da),u.support&&u.support.bootstrap&&p.on(l("shown.bs.tab"),Da),u.support&&u.support.jqueryUI&&p.on(l("tabsactivate"),Da),j){var Ha=null;i.isFunction(u.autoReflow)&&(Ha=u.autoReflow(H,Q)),Ha||(Ha=Q.length?Q[0]:H[0]),q=new MutationObserver(function(a){for(var b=function(a){return a&&a[0]&&("THEAD"==a[0].nodeName||"TD"==a[0].nodeName||"TH"==a[0].nodeName)},c=0;c<a.length;c++)if(!b(a[c].addedNodes)&&!b(a[c].removedNodes)){Da();break}}),q.observe(Ha,{childList:!0,subtree:!0})}H.data("floatThead-attached",{destroy:function(){var a=".fth-"+G;return w(),H.css(qa),ca.remove(),o&&Y.remove(),ha.parent().length&&ha.replaceWith(I),x(!1),j&&(q.disconnect(),q=null),H.off("reflow reflowed"),Q.off(a),S.off(a),Z&&(Q.length?Q.unwrap():H.unwrap()),R?Q.data("floatThead-containerWrap",!1):H.data("floatThead-containerWrap",!1),H.css("minWidth",sa),fa.remove(),H.data("floatThead-attached",!1),p.off(a),ya&&ya.removeListener(Ga),Ea=Fa=function(){},function(){return H.floatThead(u)}},reflow:function(){Da()},setHeaderHeight:function(){n()},getFloatContainer:function(){return fa},getRowGroups:function(){return M?fa.find(">table>thead").add(H.children("tbody,tfoot")):H.children("thead,tbody,tfoot")}})}),this}});